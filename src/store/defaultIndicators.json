{
  "price": {
    "enabled": true,
    "name": "Price",
    "script": "plotcandlestick(avg_ohlc(bar))",
    "options": {
      "priceScaleId": "right",
      "priceFormat": {
        "auto": true
      },
      "priceLineVisible": true,
      "lastValueVisible": true,
      "borderVisible": true,
      "upColor": "rgba(100, 157, 102, 0)",
      "downColor": "rgb(156,52,62)",
      "borderUpColor": "rgb(59, 202, 109)",
      "borderDownColor": "rgb(239,67,82)",
      "wickUpColor": "rgb(59, 202, 109)",
      "wickDownColor": "rgb(239,67,82)"
    }
  },
  "smas": {
    "name": "SMA {fastLength} {mediumLength} {slowLength}",
    "displayName": "SMA 50 100 200",
    "script": "plotline(sma($price.close, options.fastLength), color=options.fastColor)\nplotline(sma($price.close, options.mediumLength), color=options.mediumColor)\nplotline(sma($price.close, options.slowLength), color=options.slowColor)",
    "options": {
      "priceScaleId": "right",
      "fastLength": 50,
      "mediumLength": 100,
      "slowLength": 200,
      "fastColor": "#42a5f5",
      "mediumColor": "#64b5f6",
      "slowColor": "#90caf9"
    }
  },
  "emas": {
    "name": "EMA {fastLength} {mediumLength} {slowLength}",
    "displayName": "EMA 50 100 200",
    "script": "plotline(ema($price.close, options.fastLength), color=options.fastColor)\nplotline(ema($price.close, options.mediumLength), color=options.mediumColor)\nplotline(ema($price.close, options.slowLength), color=options.slowColor)",
    "options": {
      "priceScaleId": "right",
      "fastLength": 50,
      "mediumLength": 100,
      "slowLength": 200,
      "fastColor": "#42a5f5",
      "mediumColor": "#64b5f6",
      "slowColor": "#90caf9"
    }
  },
  "cmas": {
    "name": "CMA {fastLength} {mediumLength} {slowLength}",
    "displayName": "CMA 50 100 200",
    "script": "plotline(cma($price.close, options.fastLength), color=options.fastColor)\nplotline(cma($price.close, options.mediumLength), color=options.mediumColor)\nplotline(cma($price.close, options.slowLength), color=options.slowColor)",
    "options": {
      "priceScaleId": "right",
      "fastLength": 50,
      "mediumLength": 100,
      "slowLength": 200,
      "fastColor": "#42a5f5",
      "mediumColor": "#64b5f6",
      "slowColor": "#90caf9"
    }
  },
  "volume": {
    "name": "Volume",
    "script": "plothistogram({ time: time, value: vbuy + vsell, color: vbuy > vsell ? options.upColor : options.downColor})",
    "options": {
      "priceFormat": {
        "type": "volume"
      },
      "upColor": "rgba(59, 202, 109, .5)",
      "downColor": "rgba(235, 30, 47, .5)",
      "priceScaleId": "volume",
      "scaleMargins": {
        "top": 0.84,
        "bottom": 0
      }
    }
  },
  "volume_delta": {
    "name": "Volume Δ",
    "script": "plothistogram({ time: time, value: Math.abs(vbuy-vsell), color: vbuy - vsell > 0 ? options.upColor : options.downColor})",
    "options": {
      "priceFormat": {
        "type": "volume"
      },
      "upColor": "#3BCA6D",
      "downColor": "#EB1E2F",
      "priceScaleId": "volume",
      "scaleMargins": {
        "top": 0.84,
        "bottom": 0
      }
    }
  },
  "volume-plus": {
    "enabled": true,
    "name": "Volume Δ+",
    "options": {
      "priceScaleId": "volume",
      "priceFormat": {
        "type": "volume"
      },
      "upColor": "rgb(59,202,109)",
      "downColor": "rgb(239,83,80)",
      "scaleMargins": {
        "top": 0.84,
        "bottom": 0.01
      },
      "sumDownColor": "rgba(235,30,47,0.5)",
      "sumUpColor": "rgba(59,202,109,0.33)"
    },
    "script": "plothistogram({ time: time, value: vbuy-vsell, color: vbuy - vsell > 0 ? options.upColor : options.downColor})\nvar vol = vbuy+vsell\nplothistogram({ time: time, value: vbuy > vsell ? vol : -vol, color: vbuy - vsell > 0 ? options.sumUpColor : options.sumDownColor})"
  },
  "liquidations": {
    "enabled": true,
    "name": "Liquidations",
    "script": "plothistogram(lbuy, color=options.upColor)\nplothistogram(-lsell, color=options.downColor)",
    "options": {
      "priceFormat": {
        "type": "volume"
      },
      "priceScaleId": "volume_liquidations",
      "upColor": "rgb(255,76,243)",
      "downColor": "rgb(255,183,77)",
      "scaleMargins": {
        "top": 0.75,
        "bottom": 0.17
      }
    }
  },
  "cvd": {
    "enabled": true,
    "name": "CVD",
    "description": "Cumulative Volume Delta",
    "script": "plotline(cum(vbuy - vsell))",
    "options": {
      "priceScaleId": "cvd",
      "priceFormat": {
        "type": "volume"
      },
      "color": "#3BCA6D",
      "scaleMargins": {
        "top": 0.84,
        "bottom": 0
      }
    }
  },
  "btccvdperp": {
    "name": "CVD (BTC PERP)",
    "script": "line(cum((BINANCE_FUTURES:btcusdt.vbuy+BINANCE_FUTURES:btcusd_perp.vbuy+BITFINEX:BTCF0:USTF0.vbuy+BITMEX:XBTUSD.vbuy+BYBIT:BTCUSD.vbuy+BYBIT:BTCUSDT.vbuy+DERIBIT:BTC-PERPETUAL.vbuy+FTX:BTC-PERP.vbuy+HUOBI:BTC-USD.vbuy+KRAKEN:PI_XBTUSD.vbuy+OKEX:BTC-USDT-SWAP.vbuy+OKEX:BTC-USD-SWAP.vbuy)- (BINANCE_FUTURES:btcusdt.vsell+BINANCE_FUTURES:btcusd_perp.vsell+BITFINEX:BTCF0:USTF0.vsell+BITMEX:XBTUSD.vsell+BYBIT:BTCUSD.vsell+BYBIT:BTCUSDT.vsell+DERIBIT:BTC-PERPETUAL.vsell+FTX:BTC-PERP.vsell+HUOBI:BTC-USD.vsell+KRAKEN:PI_XBTUSD.vsell+OKEX:BTC-USDT-SWAP.vsell+OKEX:BTC-USD-SWAP.vsell)), title=CVD:BTC:PERP)",
    "options": {
      "priceFormat": {
        "type": "volume"
      },
      "priceScaleId": "cvdperp",
      "color": "#42a5f5"
    }
  },
  "btccvdspot": {
    "name": "CVD (BTC SPOT)",
    "script": "line(cum((BINANCE:btcusdt.vbuy+BINANCE:btcusdc.vbuy+BITFINEX:BTCUSD.vbuy+BITSTAMP:btcusd.vbuy+BITSTAMP:btcusdt.vbuy+BITSTAMP:btcusdc.vbuy+COINBASE:BTC-USDC.vbuy+COINBASE:BTC-USD.vbuy+COINBASE:BTC-USDT.vbuy+FTX:BTC/USD.vbuy+FTX:BTC/USDT.vbuy+HUOBI:btcusdt.vbuy+HUOBI:btcusdc.vbuy+KRAKEN:XBT/USDC.vbuy+KRAKEN:XBT/USDT.vbuy+KRAKEN:XBT/USD.vbuy+OKEX:BTC-USDT.vbuy+OKEX:BTC-USDC.vbuy+POLONIEX:USDT_BTC.vbuy+POLONIEX:USDC_BTC.vbuy)-(BINANCE:btcusdt.vsell+BINANCE:btcusdc.vsell+BITFINEX:BTCUSD.vsell+BITSTAMP:btcusd.vsell+BITSTAMP:btcusdt.vsell+BITSTAMP:btcusdc.vsell+COINBASE:BTC-USDC.vsell+COINBASE:BTC-USD.vsell+COINBASE:BTC-USDT.vsell+FTX:BTC/USD.vsell+FTX:BTC/USDT.vsell+HUOBI:btcusdt.vsell+HUOBI:btcusdc.vsell+KRAKEN:XBT/USDC.vsell+KRAKEN:XBT/USDT.vsell+KRAKEN:XBT/USD.vsell+OKEX:BTC-USDT.vsell+OKEX:BTC-USDC.vsell+POLONIEX:USDT_BTC.vsell+POLONIEX:USDC_BTC.vsell)), title=CVD:BTC:SPOT)",
    "options": {
      "priceFormat": {
        "type": "volume"
      },
      "priceScaleId": "cvdspot",
      "color": "#4caf50"
    }
  },
  "ctd": {
    "script": "plotline(cum(cbuy-csell))",
    "name": "CTD",
    "description": "Cumulative Trades Delta",
    "options": {
      "priceScaleId": "ctd",
      "lineStyle": 4,
      "lineWidth": 1
    }
  },
  "cld": {
    "script": "plotline(cum(lbuy-lsell))",
    "name": "CLD",
    "description": "Cumulative Liquidations Delta",
    "options": {
      "priceFormat": {
        "type": "volume"
      },
      "color": "rgb(156,39,176)",
      "priceScaleId": "ctd",
      "lineWidth": 1,
      "scaleMargins": {
        "top": 0.75,
        "bottom": 0.17
      }
    }
  },
  "linregcurve": {
    "script": "plotline(linreg($price.close, 50))\nplotline(linreg($price.close, 100))\nplotline(linreg($price.close, 200))",
    "name": "Linear Regression",
    "options": {
      "priceScaleId": "right",
      "lineStyle": 4,
      "lineWidth": 1
    }
  },
  "allmarkets": {
    "script": "plotline(BITFINEX:BTCUSD.close, color=#97c554, title=Bitfinex.spot)\nplotline(BINANCE:btcusdt.close, color=#f3ba2f, title=Binance.spot)\nplotline(OKEX:BTC-USDT.close, color=#5894f2, title=Okex.spot)\nplotline(KRAKEN:XBT/USD.close, color=#5841d8, title=Kraken.spot)\nplotline(COINBASE:BTC-USD.close, color=#0e70e2, title=Coinbase.spot)\nplotline(POLONIEX:USDT_BTC.close, color=#858b8f, title=Poloniex.spot)\nplotline(HUOBI:btcusdt.close, color=#2ca6e0, title=Huobi.spot)\nplotline(BITSTAMP:btcusd.close, color=#169f4a, title=Bitstamp.spot)\nplotline(BITMEX:XBTUSD.close, color=#595fb5, title=Bitmex.perp)\nplotline(BITFINEX:BTCF0:USTF0.close, color=#97c554, title=Bitfinex.perp)\nplotline(OKEX:BTC-USD-SWAP.close, color=#5894f2, title=Okex.perp)\nplotline(BINANCE_FUTURES:btcusdt.close, color=#f3ba2f, title=Binance.perp)\nplotline(BINANCE_FUTURES:btcusd_perp.close, color=#f3ba2f, title=Binance.perp)\nplotline(HUOBI:BTC-USD.close, color=#2ca6e0, title=Huobi.perp)\nplotline(KRAKEN:PI_XBTUSD.close, color=#5841d8, title=Kraken.perp)\nplotline(DERIBIT:BTC-PERPETUAL.close, color=#2dae9a, title=Deribit.perp)\nplotline(FTX:BTC-PERP.close, color=#02a6c2, title=Ftx.perp)\nplotline(BYBIT:BTCUSD.close, color=#f9b600, title=Bybit.perp)",
    "name": "All markets",
    "options": {
      "priceScaleId": "right",
      "spotColor": "#81c784",
      "futuresColor": "#ec407a"
    }
  },
  "ichimoku": {
    "script": "conversionLine=(lowest($price.low, options.conversionLineLength) + highest($price.high, options.conversionLineLength)) / 2\nbaseLine=(lowest($price.low, options.baseLineLength) + highest($price.high, options.baseLineLength)) / 2\nleadLineOne=(conversionLine + baseLine) / 2\nleadLineTwo=(lowest($price.low, options.laggingSpanTwoLength) + highest($price.high, options.laggingSpanTwoLength)) / 2\nplotcloudarea(leadLineTwo, leadLineOne, offset=options.displacement)",
    "name": "Ichimoku",
    "options": {
      "baseLineLength": 26,
      "conversionLineLength": 9,
      "displacement": 24,
      "laggingSpanTwoLength": 52,
      "priceScaleId": "right"
    }
  },
  "bollinger_bands": {
    "script": "a = sma(Math.pow($price.close,2),options.length)\nb = Math.pow(sum($price.close,options.length),2)/Math.pow(options.length,2)\nstdev = Math.sqrt(a - b)\nsrc = $price.close\n\nbasis = sma($price.close, options.length)\ndev = options.mult * stdev\nupper = basis + dev\nlower = basis - dev\n\nplotline(basis, color=options.basisColor)\nplotcloudarea(lower, upper)",
    "name": "Bollinger Bands",
    "options": {
      "priceScaleId": "right",
      "mult": 2,
      "length": 20,
      "lineStyle": 2,
      "basisColor": "rgba(129,199,132,0.5)",
      "positiveColor": "rgba(0,0,0,0.1)",
      "negativeColor": "rgba(0,0,0,0.1)",
      "lowerLineColor": "rgb(129,199,132)",
      "higherLineColor": "rgb(129,199,132)"
    }
  },
  "bb-ema-ribbon": {
    "script": "src = sma($price.close, options.maLength)\na = sma(Math.pow(src,2),options.bbLength)\nb = Math.pow(sum(src,options.bbLength),2)/Math.pow(options.bbLength,2)\nstdev = Math.sqrt(a - b)\ndev = options.mult * stdev\nbasis = sma(src, options.bbLength)\nupper = basis + dev\nlower = basis - dev\nsrcTwo=($price.close + $price.low + $price.high) / 3\nemaSlow = ema(srcTwo, options.emaSlowLength)\nemaFast = ema(srcTwo, options.emaFastLength)\nplotcloudarea(lower, upper, positiveColor=options.slowRibbonColor, negativeColor=options.slowRibbonColor)\nplotcloudarea(emaSlow, emaFast)",
    "name": "Ribbon",
    "options": {
      "priceScaleId": "right",
      "maLength": 200,
      "bbLength": 50,
      "mult": 3,
      "emaSlowLength": 50,
      "emaFastLength": 20,
      "slowRibbonColor": "rgba(255,204,128,0.1)",
      "higherLineColor": "rgba(0,0,0,0)",
      "lowerLineColor": "rgba(0,0,0,0)",
      "negativeColor": "rgba(255,167,38,0.25)",
      "positiveColor": "rgba(255,167,38,0.25)"
    }
  },
  "vwap": {
    "script": "var src = ($price.high + $price.low + $price.close)/3\nvar vol=vbuy+vsell\nvar sumVol = cum(vol)\nvar sumSrcVol = cum(src * vol)\nvar sumSrcSrcVol = cum(vol*Math.pow(src, 2))\nvar VWAP = sumSrcVol / sumVol \nvar variance = sumSrcSrcVol / sumVol - Math.pow(VWAP, 2)\nvar stDev = Math.sqrt(variance < 0 ? 0 : variance)\n\t\nline(VWAP)\ncloudarea(VWAP - stDev * options.stdevMultiplier, VWAP + stDev * options.stdevMultiplier)\n\nvar unixDays = time / 60 / 60 / 24 + 3\nif (unixDays % (options.sessionLengthInDays) === 0) {\n  fns[0].state = {}\n  fns[1].state = {}\n  fns[2].state = {}\n}",
    "name": "VWAP",
    "options": {
      "priceScaleId": "right",
      "stdevMultiplier": 1,
      "color": "rgb(41,98,255)",
      "sessionLengthInDays": 7
    }
  },
  "rsi": {
    "script": "// rsi\nsrc(50) = $price.close\nvar change = src - src[1]\nvar up = ema(Math.max(change, 0), options.length)\nvar down = ema(-Math.min(change, 0), options.length)\nrsi = down == 0 ? 100 : up == 0 ? 0 : 100 - (100 / (1 + up / down))\nline(rsi)\nbrokenarea(options.thresholdUp, options.thresholdLow, color=options.thresholdColor)\n\nif (options.showDivs) {\n  // <markers utils>\n  if (markers === 0) {\n    markers = []\n  }\n  \n  if (pendingMarker && pendingMarker.time < time) {\n    markers.push(pendingMarker)\n    pendingMarker = null\n  }\n  \n  var newMarker = null\n  // </markers utils>\n  \n  // find long signals\n  pl = pivot_low(rsi, options.pivotLeftLength, options.pivotRightLength)\n  if (pl && pl !== _pl) {\n    var plsrc = src[options.pivotRightLength]\n    if (pl > _pl && plsrc < _plsrc && (pl < options.thresholdLow || _pl < options.thresholdLow)) {\n      newMarker = {\n        time: time - options.pivotRightLength * bar.timeframe,\n        position: 'belowBar',\n        text: '🔺',\n        size: 1\n      }\n    }\n    \n    _plsrc = plsrc\n    _pl = pl\n  }\n  \n  // find sell signals\n  ph = pivot_high(rsi, options.pivotLeftLength, options.pivotRightLength)\n  \n  if (ph && ph !== _ph) {\n    var phsrc = src[options.pivotRightLength]\n    if (ph < _ph && phsrc > _phsrc && (ph > options.thresholdUp || _ph > options.thresholdUp)) {\n      newMarker = {\n        time: time - options.pivotRightLength * bar.timeframe,\n        position: 'aboveBar',\n        text: '🔻',\n        size: 1\n      }\n    }\n    \n    _phsrc = phsrc\n    _ph = ph\n  }\n  \n  // <markers utils>\n  if (newMarker || (pendingMarker && !newMarker)) {\n    pendingMarker = newMarker\n    \n    if (markers.length > 200) {\n      markers.splice(0, 1)\n    }\n    \n    if (series[0].setMarkers) {\n      series[0].setMarkers(markers.concat(pendingMarker))\n    }\n  }\n  // </markers utils>\n}",
    "name": "RSI",
    "options": {
      "priceScaleId": "rsi",
      "scaleMargins": {
        "top": 0.01,
        "bottom": 0.83
      },
      "thresholdColor": "rgba(102,187,106,0.1)",
      "color": "rgb(165,214,167)",
      "length": 14,
      "pivotLeftLength": 3,
      "pivotRightLength": 3,
      "thresholdLow": 20,
      "thresholdUp": 70,
      "showDivs": false
    }
  },
  "pivot-vwap": {
    "name": "VWAP Pivots",
    "version": "3.0.9",
    "options": {
      "priceScaleId": "right",
      "pivotLeftLength": 14,
      "pivotRightLength": 14,
      "lowerLineColor": "rgb(41,98,255)",
      "higherLineColor": "rgb(41,98,255)",
      "positiveColor": "rgba(41,98,255,0.25)",
      "negativeColor": "rgba(41,98,255,0.25)",
      "showVwap": true,
      "showPivot": false,
      "showStdBands": false,
      "devMultA1": 1.5,
      "devMultA2": 1.618,
      "devMultB1": 2,
      "devMultB2": 2.236
    },
    "script": "ph = pivot_high($price.close, options.pivotLeftLength, options.pivotRightLength)\npl = pivot_low($price.close, options.pivotLeftLength, options.pivotRightLength)\n\n\nsrcHigh(50) = $price.close\nvHigh(50) = vsell + vbuy\n\nif (ph && _ph !== ph) {\n  if (ph > _ph) {\n    var lookbackLength = (options.pivotRightLength+options.pivotRightLength)/2\n    \n    var _volHigh = 0\n    var _srcVolHigh  = 0\n    var _srcSrcVolHigh  = 0\n    \n    for (var i = lookbackLength - 1; i > 0; i--) {\n      var src = srcHigh[i]\n      var vol = vHigh[i]\n      _volHigh = _volHigh + vol\n      _srcVolHigh = _srcVolHigh + src * vol\n      _srcSrcVolHigh = _srcSrcVolHigh + vol * Math.pow(src, 2)\n    }\n    \n    fns[2].state.open = _volHigh\n    fns[3].state.open = _srcVolHigh\n    fns[4].state.open = _srcSrcVolHigh\n  }\n  \n  _ph = ph\n}\n\nvar volHigh = cum(vHigh)\nvar srcVolHigh = cum(srcHigh * vHigh)\nvar srcSrcVolHigh = cum(vHigh * Math.pow(srcHigh, 2))\nvar vwapHigh = srcVolHigh / volHigh \nvar varianceHigh = srcSrcVolHigh  / volHigh - Math.pow(vwapHigh, 2)\nvar stDevHigh = Math.sqrt(varianceHigh )\n\nsrcLow(50) = $price.close\nvLow(50) = vbuy + vsell\n\nif (pl && _pl !== pl) {\n  if (pl < _pl) {\n    var lookbackLength = (options.pivotRightLength+options.pivotRightLength)/2\n    \n    var _volLow = 0\n    var _srcVolLow  = 0\n    var _srcSrcVolLow  = 0\n    \n    for (var i = lookbackLength - 1; i > 0; i--) {\n      var src = srcLow[i]\n      var vol = vLow[i]\n      _volLow = _volLow + vol\n      _srcVolLow = _srcVolLow + src * vol\n      _srcSrcVolLow = _srcSrcVolLow + vol * Math.pow(src, 2)\n    }\n    \n    fns[5].state.open = _volLow\n    fns[6].state.open = _srcVolLow\n    fns[7].state.open = _srcSrcVolLow\n  }\n  \n  _pl = pl\n}\n\nvar volLow = cum(vLow)\nvar srcVolLow = cum(srcLow * vLow)\nvar srcSrcVolLow = cum(vLow * Math.pow(srcLow, 2))\nvar vwapLow = srcVolLow / volLow\nvar varianceLow = srcSrcVolLow / volLow- Math.pow(vwapLow, 2)\nvar stDevLow = Math.sqrt(varianceLow)\n\nif (options.showStdBands) {\n  cloudarea({\n    time: time,\n    higherValue: vwapHigh + stDevHigh * options.devMultA1,\n    lowerValue: vwapHigh + stDevHigh * options.devMultA2\n  },\n    positiveColor= options.negativeColor,\n    negativeColor= options.negativeColor,\n    higherLineColor= options.higherLineColor,\n    lowerLineColor= options.higherLineColor\n  )\n  \n  cloudarea({\n    time: time,\n    higherValue: vwapHigh + stDevHigh * options.devMultB1,\n    lowerValue: vwapHigh + stDevHigh * options.devMultB2\n  },\n    positiveColor= options.negativeColor,\n    negativeColor= options.negativeColor,\n    higherLineColor= options.higherLineColor,\n    lowerLineColor= options.higherLineColor\n  )\n  \n  cloudarea({\n    time: time,\n    higherValue: vwapLow - stDevLow * options.devMultA1,\n    lowerValue: vwapLow - stDevLow * options.devMultA2\n  },\n    positiveColor= options.positiveColor,\n    negativeColor= options.positiveColor,\n    higherLineColor= options.lowerLineColor,\n    lowerLineColor= options.lowerLineColor\n  )\n  \n  cloudarea({\n    time: time,\n    higherValue: vwapLow - stDevLow * options.devMultB1,\n    lowerValue: vwapLow - stDevLow * options.devMultB2\n  },\n    positiveColor = options.positiveColor,\n    negativeColor = options.positiveColor,\n    higherLineColor = options.lowerLineColor,\n    lowerLineColor = options.lowerLineColor\n  )\n}\n\nif (options.showVwap) {\n  cloudarea(vwapLow, vwapHigh)\n}\n\nif (options.showPivot) {\n  line(_ph, offset=(-options.pivotRightLength-options.pivotRightLength)/2)\n  line(_pl, offset=(-options.pivotRightLength-options.pivotRightLength)/2)\n}"
  }
}
